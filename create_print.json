{
  "name": "create_print",
  "description": "Create a new print entry from a staged project folder.",
  "inputs": {
    "project_name": {
      "type": "string",
      "description": "Folder under Staging that contains Template.md and images."
    }
  },
  "requirements": {
    "staging_root": "Staging",
    "template_file": "Template.md",
    "prints_root": "_prints",
    "images_root": "assets/images/prints"
  },
  "allowed_categories": [
    "visual impairments",
    "occupational therapy",
    "physical therapy",
    "speech language pathology",
    "orientation and mobility",
    "miscellaneous"
  ],
  "category_sku_suffixes": {
    "visual impairments": "-VIS",
    "occupational therapy": "-OT",
    "physical therapy": "-PT",
    "speech language pathology": "-SLP",
    "orientation and mobility": "-OM",
    "miscellaneous": "-MISC"
  },
  "category_rules": {
    "miscellaneous": "Can only be used if no other categories are applied. If miscellaneous is selected, it must be the only category."
  },
  "placeholders": [
    "$Template",
    "$SKU",
    "$Short_Description",
    "$Photo",
    "$Photo_Title",
    "$Long_Description"
  ],
  "steps": [
    "Open Staging/<project_name>/Template.md.",
    "Collect metadata: title, short description, long description, topic/context, photo file(s), photo title(s).",
    "Determine applicable categories based on topic/context. Multiple categories allowed (max 5). Only use: visual impairments, occupational therapy, physical therapy, speech language pathology, orientation and mobility, or miscellaneous. IMPORTANT: miscellaneous can only be used if no other categories applyâ€”if miscellaneous is selected, it must be the sole category.",
    "Generate SKU by concatenating category suffixes. Example: if categories are [visual impairments, orientation and mobility], SKU = <base-name>-VIS-OM. If only miscellaneous, SKU = <base-name>-MISC.",
    "Generate tags based on topic and product type (e.g., braille, tactile, adaptive, mobility, therapy, etc.).",
    "If multiple images exist, repeat the image markdown line once per image:",
    "![$Photo_Title](/assets/images/prints/$Photo){: .full style=\"max-width: 600px;\"}",
    "Replace placeholders in the file with provided values, populate categories and tags in frontmatter.",
    "Rename the file to a slugified filename based on $Template (e.g., lowercase with hyphens) and move it to _prints/<slug>.md.",
    "Move all image files from Staging/<project_name>/ to assets/images/prints/.",
    "Ensure header teaser uses the first image file path.",
    "Leave the staging folder contents cleaned up (only non-moved files remain)."
  ],
  "output": {
    "print_markdown_path": "_prints/<slug>.md",
    "images_copied_to": "assets/images/prints/",
    "frontmatter_fields": {
      "title": "$Template",
      "sku": "<generated with category suffixes>",
      "categories": "[list of applicable categories]",
      "tags": "[list of generated tags]",
      "description": "$Short_Description"
    }
  }
}
